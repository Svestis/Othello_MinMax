<h1 align="center"> 1η Εργασία μαθήματος "Τεχνητή Νοημοσύνη" ΟΠΑ 2020-2021 </h1>

## Ομάδα
|  ***Ονοματεπώνυμο***                  |**ΑΜ** |
|:---:                                  |:---:  |
| Γαλιατσάτου Βασιλική                  |3120024|
| Μπούσουλας-Ραϊκίδης Ορφέας-Γιώργος    |3160111|
| Κοιλάκος Παναγιώτης                   |3140081|

## Γενικά

Για την εργασία επιλέξαμε να υλοποιήσουμε τη 2η άσκηση και συγκεκριμένα το παιχνίδι **[Othello]**(https://en.wikipedia.org/wiki/Reversi#Othello).

Περιληπτικά, το Othello είναι ένα παιχνίδι δυο παικτών στο οποίο έχουμε ένα ταμπλο και πούλια δυο χρωμάτων, μαύρα και λευκά   
(dark and light για τους σκοπούς της άσκησης).

By convention τα πούλια είναι τοποθετημένα διαγώνια στο κέντρο του ταμπλό με τα μαύρα να βρίσκονται στην πάνω δεξιά και   
κάτω αριστερή γωνία.  
  
###### Η κατάσταση εκκίνησης του παιχνιδιού
![ΒΙ](mdReportData/othelloinit.png)  
###### Source: \[Othello](https://en.wikipedia.org/wiki/Reversi#Othello)

Οι κινήσεις που μπορούν να γίνουν είναι αυτές οι οποίες επιτρέπουν τον σχηματισμό μιας οριζόντιας, κάθετης ή διαγώνιας γραμμής  
μεταξύ δυο πουλιών ιδίου χρώματος, τα οποία παρεμβάλονται όμως από πούλια αντιθέτου χρώματος. Τα πούλια αυτά "καταλαμβάνονται" και αλλάζουν χρώμα.

Οι τελικές καταστάσεις έχουν μια από τις ακόλουθες μορφές:  
1. Το ταμπλό έχει γεμίσει με πούλια διαφόρων χρωμάτων. Νικητής είναι αυτός με τα περισσότερα πούλια που έχουν το χρώμα του  
και κερδίζει με σκόρ όσα είναι τα πιόνια του ενώ ο αντίπαλος χάνει με σκορ επίσης όσα είναι τα πιόνια του.
2. Το ταμπλό δεν έχει γεμίσει αλλά δεν υπάρχουν άλλες κινήσεις για κανέναν από τους δυο παίκτες. Και οι δυο παίχτες έχουν  
τουλάχιστον ένα πούλι στο ταμπλό, κερδίζει αυτός με τα περισσότερα πούλια που έχουν το χρώμα του και κερδίζει με σκορ όσα είναι τα πιόνια του, ενώ ο αντίπαλος χάνει με σκορ επίσης όσα είναι τα πιόνια του.
3. Ένας παίχτης μένει χωρίς κανένα πούλι στο ταμπλό (κατελήφθησαν όλα από τον αντίπαλο) και συνεπώς δεν υπάρχουν άλλες κινήσεις.  
Κερδίζει ο παίκτης που έχει πούλια στο ταμπλο και κερδίζει με σκορ 64-0 έναντι του αντιπάλου.

## Τρόπος χρήσης

Το πρόγραμμα δεν απαιτεί ιδιαίτερο τρόπο μεταγλώτισης, εγκατάστασης ή εκτέλεσης.

Με την χρήση PyCharm χρειάζεται η δημιουργία ενός configuration με path το path του αρχείου exercise1.py

Από εκεί και πέρα όλη η ανάδραση γίνεται μέσω του προσφερόμενου terminal του PyCharm (προσθέτοντας τις απαραίτητες παραμέτρους ανάλογα με το πώς θέλουμε να παραμετροποιήσουμε την εκτέλεση).

Μπορούμε αντίστοιχα να εκτελέσουμε το αρχείο από το terminal ή το cmd γράφοντας python exerscise1.py arg1 arg2 arg3 όπου arg1 arg2 arg3 οι απαραίτητες παράμετροι ανάλογα με το πώς θέλουμε να παραμετροποιήσουμε το πρόγραμμά μας.

Σε κάθε περίπτωση οι παραμάμετροι είναι:
- arg1: True ή False που προσδιορίζει αν ο παίκτης παίζει πρώτος
- arg2: True ή False που προσδιορίζει αν θέλουμε να φαίνονται οι πιθανές κινήσεις
- arg3: Int από 1 έως και 10 που προσδιορίζει το depth του minimax (δυσκολία)
- -h  : Optional argument που παρουσιάζει την βοήθεια για τα arguments
###  

## Αρχιτεκτονική
Ο κώδικας έχει σχεδιαστεί σε 4 διαφορετικά .py αρχεία. Τα αρχεία αυτά είναι:
- board.py που περιέχει την κλαση του πίνακα (ταμπλό) και σχετικές μεθόδους
- othello.py που περιέχει την κλάση του παιχνιδιού και σχετικές μεθόδους. Επίσης αναλαμβάνει το gameplay
- exerscise1.py που περιέχει την main function που εκινεί το gameplay και κάνει το argument handling
- minimax.py που υλοποιεί την τεχνική minimax με α-β πριόνισμα για εξοικονόμηση χώρου και χρόνου

### board.py
Η κλάση board που περιέχεται στο board.py έχει οριστεί έτσι ώστε να μπορούμε να κατασκευάζουμε στιγμιότυπα πινάκων (ταμπλό),  
ανεξάρτητα από το gameplay.  
  
  Εκτός από την κλάση board περίεχονται και βοηθητικές μέθοδοι που διαχειρίζονται το input και την πρόσβαση στον πίνακα  
(δεν θα αναφερθούν αναλυτικά για λόγους συντομίας).
  
  
Περιέχονται οι εξής μέθοδοι:
- \__init__   
Πρόκειται για μια μέθοδο η οποία αναλαμβάνει να κάνει το initialization οποιουδήποτε instance της κλάσης. Πρόκειται δηλαδή  
περι κατασκευαστή που ανάλογα με τα ορίσματα που δέχεται αρχικοποιεί τις μεταβλητές του instance της κλάσης.
- create_board  
Πρόκειται για μια μέθοδο η οποία δημιουργεί την 2d λίστα στην αρχή του παιχνιδιού (αρχική κατάσταση). Είναι και η μοναδική  
στατική μέθοδος της κλάσης.   
- set_board
  Δέχεται ως ορίσματα πληροφορίες σχετικές με την κατάσταση του παιχνιδιού και του πίνακα (π.χ. εισαγώμενη κίνηση,   
  χρώμα παίχτη, χρώματα των παικτών και την λίστα ιστορικότητας). Αναλαμβάνει την εισαγωγή ενός πιονιού σε κάποιο σημείο  
  του πίνακα(ταμπλό). Μεταξύ άλλων ελέγχει αν η κίνηση είναι έγκυρη (μέσω άλλης μεθόδου), αποφασίζει για το χρώμα που θα  
  βάλει, ορίζει την πιο  πρόσφατη κίνηση που έγινε, είσαγει την κίνηση στο ιστορικό κινήσεων και τελικά "γυρίζει" το χρώμα  
  των πιονιών του αντιπάλου με την χρήση άλλης μεθόδου.  
  
  Επιστρέφει τόσο την κίνηση που έγινε όσο και την ανανεωμένη λίστα ιστορικού. Αν η κίνηση δεν είναι έγκυρη επιστρέφει   
  μήνυμα λάθους.
  - move_exits  
  Πρόκειται για βοηθητική μέθοδο η οποία ελέγχει αν η επιθυμητή κίνηση βρίσκεται στον κατάλογο έγκυρων κινήσεων.  
    
    Επιστρέφει True αν υπάρχει και False αν δεν υπάρχει.
  
- print_board  
Πρόκειται για μία μέθοδο η οποία εκτυπώνει τον πίνακα σε human friendly μορφή
- flip_opponent_pieces  
Πρόκειται για μια μέθοδο η οποία αναστρέφει τα χρώματα των αντιπάλων μετά από μια κίνηση.
  
  Δέχεται ως ορίσματα πληροφορίες σχετικές με την κατάσταση του παιχνιδιού και του πίνακα (π.χ. το πούλι που τοποθετήσαμε  
και τον δράστη την συγκεκριμένη χρονική στιγμή). Αναλαμβάνει να κάνει όλους τους ελέγχους και τελικά να αναστρέψει τα πούλια  
τα οποία πρέπει να αναστραφούν σύμφωνα με την κίνηση. Πιο συγκεκριμένα ελέγχει διαγώνια, οριζόντια και κάθετα για  
σχηματιζόμενες ευθείες μεταξύ του τοποθετημένου πιονιού και κάποιου άλλο πιονιού του ίδιου χρώματος. Όταν εντοπίσει τέτοιες  
ευθείες αναστρέφει το χρώμα των πιονιών.  
  
  Επιστρέφει τον πίνακα με ανανεωμένα τα αναστρεμένα πούλια. 
- find_moves  
Πρόκειται για μια μέθοδο η οποία βρίσκει τις πιθανές έγκυρες κινήσεις ανάλογα με την καστάσταση του πίνακα (ταμπλό) και με το  
ποιος παίζει.
  
  Δέχεται ως ορίσματα πληροφορίες για τον παίκτη μια συγκεκριμένη χρονική στιγμή. Αναλαμβάνει να κάνει όλους τους ελέγχους και  
τελικά να παρουσιάσει τις πιθανές έγκυρες κινήσεις. Πιο συγκεκριμένα ελέγχει διαγώνια, οριζόντια και κάθετα για θέσεις γειτονικές
στα αντίπαλα πούλια στις οποίες δημιουργείτε ευθεία.
  
  Επιστρέφει τις πιθανές έγκυρες κινήσεις.
- get_children  
Πρόκειται για μια μέθοδο η οποία δοθείσας μιας κατάστασης πίνακα (και του χρώματος του τρέχοντος παίκτη), δημιουργεί instances  
της κλάσης board για όλες τις πιθανές κινήσεις του δοθέντος πίνακα.  
  
  Επιστρέφει έναν κατάλογο που περιέχει instances της τάξης board.
- check_win_conditions  
Πρόκειται για μια μέθοδο η οποία ελέγχει τις συνθήκες τερματισμού, εκτυπώνει το σκορ και επιστρέφει το initial του νική  
(p για player ή c για computer).  
  
  Δέχεται ως ορίσματα τα χρώματα των παικτών και αν θέλουμε να προχωράει σε εκτύπωση του ταμπλό.
  
  Επιστρέφει το initial του νικητή.
- evaluate  
Πρόκειται για μια μέθοδο η οποία ελέγχει τον πίνακα και "δίνει" ένα σκορ ανάλογα με την τρέχουσα βαθμολογία. Είναι και η πρώτη  
μέθοδος που χρησιμοποιείτε άμεσα το minimax.  
  
  Δέχεται ως όρισμα το χρώμα του υπολογιστή, αποφασίζει το χρώμα του παίκτη και διατρέχει σειρές και στείλες για να προσμετρήσει  
  το σκορ (ποιος προηγείται) αυξάνοντας έναν μετρητή λευκών και μαύρων πιονιών. Σε περίπτωση που προκύπτει νίκη ενός από τους  
  δυο αποφασίζει και προσθέτει 100 πόντους στον νικητή.  
  
  Επιστρέφει την συνολική τιμή του πίνακα (θετική κερδίζει ο υπολογιστής, αρνητική κερδίζει ο παίκτης)
### othello.py
Η κλάση Game που περιέχεται στο board.py έχει οριστεί έτσι ώστε να μπορούμε να διαχειριζόμαστε το gameplay.   
Εκτός από την κλάση game περίεχονται και βοηθητικές μέθοδοι που διαχειρίζονται το input και την πρόσβαση στον πίνακα  
(δεν θα αναφερθούν αναλυτικά για λόγους συντομίας), όπως και μια μέθοδο που εκκινεί το παιχνίδι.
  
Περιέχονται οι εξής μέθοδοι:
- \__init__  
Πρόκειται για μια μέθοδο η οποία αναλαμβάνει να κάνει το initialization οποιουδήποτε instance του game. Πρόκειται δηλαδή
περι κατασκευαστή που ανάλογα με τα ορίσματα που δέχεται αρχικοποιεί τις μεταβλητές του instance της κλάσης.  
- set_color  
Πρόκειται για μια μέθοδο η οποία προσδιορίζει ποιο χρώμα έχω ο κάθε παίκτης.  
  
  Δέχεται ως όρισμα το αν ο παίκτης έχει επιλέξει να παίξει πρώτος και ανάλογα θέτει τα χρώματα του παίκτη και του υπολογιστή.  
  
  Θέτει στις μεταβλητές της κλάσης το χρώμα του κάθε παίκτη όπως και το ποιος παίζει την δεδομένη χρονική στιγμή.
- print_history  
Πρόκειται για μια μέθοδο η οποία διατρέχει την λίστα με την ιστορικότητα των κινήσεων και τις εκτυπώνει αν ζητηθεί από  
τον παίκτη.
- turn  
Πρόκειται για μια μέθοδο η οποία εναλάσσει τις κινήσεις των παικτών.  
  
  Είτε εναλλάσει τον τρέχοντα παίκτη ή επιστρέφει True που σημαίνει ότι δεν υπάρχουν επιπλέον κινήσεις.
- player_move  
Πρόκειται για μια μέθοδο η οποία ορίζει το τι συμβαίνει όταν παίζει ο παίκτης, καλόντας μια βοηθητική μέθοδο.
- handle_player_input  
Πρόκειται για μια μέθοδο η οποία καλείτε από την player_move και ζητάει/αποθηκεύει τις επιλογές του παίκτη.  
  
  Δέχεται ως ορίσματα την κίνηση του παίχτη, κάνει έλεγχο ορθότητας και ανάλογα με την επιλογή του παίκτη καλεί την κατάληλη  
  μέθοδο είτε εκτύπωσης του ιστορικού ή της αλλαγής του ταμπλό (από την τάξη board).
- computer_move
Ομοίως με την player_move πρόκειται για μια μέθοδο η οποία ορίζει το τι συμβαίνει όταν παίζει ο παίκτης.  
  
  Εδώ αφαρμόζεται και το AI.
- reset_all_marks  
Πρόκειται για μια μέθοδο η οποία επιστρέφει το ταμπλό στην κατάσταση που βρισκόταν (πριν εμφανιστού οι πιθανές κινήσεις)  
- set_possible
Πρόκειται για μια μέθοδο η οποία διατρέχει τις πιθανές έγκυρες κινήσεις και παρουσιάζει στο ταμπλό με ένα 'Χ' τις θέσεις  
τους. Ο πίνακας επιστρέφει στην προηγούμενη μορφή όταν χρειαστεί με την χρήση της reset_all_marks  
- play
Μια συνάρτηση που περιέχει έναν ατέρμονα βρόγχο και τερματίζει μόνο στην περίπτωση που έχει κερδίσει κάποιος παίκτης (με  
την βοήθεια της check_win_condition της τάξης board)
- start_game  
Πρόκειται για μια μέθοδο η οποία εκκινεί το παιχνίδι.  
  
  Δέχεται ως όρισμα το αν θέλει ο παίκτης να παίξει πρώτος, αν θέλει να φαίνονται οι δυνατές κινήσεις και το επίπεδο δυσκολίας.  
  
  Δημιουργεί ένα instance της τάξης game και την επιστρέφει. 
### exerscise1.py
To αρχείο exerscise1.py περιέχει όλες τις μεθόδος και μια main που χρειάζεται το παιχνίδι για να εκκινήσει.  
  
  Περιέχονται οι εξής μέθοδοι:
- print_hi  
Πρόκειται για μια μέθοδο η οποία εκτυπώνει το μήνυμα καλοσωρίσματος αφότου δεχθεί το όνομα του χρήστη. 
- parse_arguments  
Πρόκειται για μια μέθοδο η οποία δέχεται τα ορίσματα τα οποία απαιτούνται για την εκτέλεση του προγράμματος.  
Με την χρήση PyCharm χρειάζεται η δημιουργία ενός configuration με path το path του αρχείου exercise1.py

  Από εκεί και πέρα όλη η ανάδραση γίνεται μέσω του προσφερόμενου terminal του PyCharm (προσθέτοντας τις απαραίτητες παραμέτρους ανάλογα με το πώς θέλουμε να παραμετροποιήσουμε την εκτέλεση).

  [click on this link](## Τρόπος χρήσης)
- \__main__  
H main κάνει unpack τα command line arguments σε μεταβλητές (και διαχειρίζεται και τα εσφαλμέντα arguments), δημιουργεί  
ένα Instance της τάξης Game και εκκινεί το παιχνίδι.
### minimax.py
Η minimax.py περιέχει τις μεθόδους που απαιτούνται για την υλοποίηση του AI με την μέθοδο MiniMax με πριόνισμα α-β.  
  
  Περιέχονται οι εξής μέθοδοι:
- minimax_move  
Πρόκειται για την μέθοδο η οποία εκκινεί τον αλγόριθμο minimax καλόντας την maximize συνάρτηση.  
   
   Δέχεται ως ορίσματα ένα instance μιας τάξης board, το μέγιστο βάθος, το χρώμα του παίκτη και το χρώμα του υπολογιστή..
     
   Επιστρέφει μια κίνηση σε μορφή tuple.
- maximize  
Πρόκειται για μια μέθοδο η οποία εφαρμόζει την minimax από την πλευρά του maximizer (θέλει να πετύχει το μέγιστο σκορ).  
Πάντα στην δικιά μας περίπτωση ο maximizer θα είναι ο υπολογιστής.
  
  Δέχεται ως όρισμα ένα instance της τάξης board , το τρέχων βάθος, το μέγιστο βάθος, το άλφα και το βήτα για το πριόνισμα.
  
  Αρχικά ελέγχει αν εκπληρώνονται τα win conditions και αν ναι τότε η συνάρτηση επιστρέφει το Instance. Αν όχι τότε γίνεται  
  evaluate η χειρότερη κατάσταση για τον maximizer (σκορ -64) και δημιουργούνται τα παιδιά του τρέχοντος instance του board.
  Για κάθε παιδί καλείται η συνάρτηση min, γίνεται evaluation και ελέγχονται οι συνθήκες για το α-β πριόνισμα.
- minimize  
Πρόκειται για μια μέθοδο η οποία εφαρμόζει την minimax από την πλευρά του minimizer (θέλει να πετύχει το να μειώσει το  
μεγαλύτερο σκορ του αντιπάλου στο λιγότερο). Πάντα στην δικιά μας περίπτωση ο minimizer θα είναι ο παίκτης.
  
  Αντίστοιχα με τον maximizer, δέχεται ως όρισμα ένα instance της τάξης board, το τρέχων βάθος, το μέγιστο βάθος,   
  το άλφα και το βήτα για το πριόνισμα.
  
  Αρχικά ελέγχει αν εκπληρώνονται τα win conditions και αν ναι τότε η συνάρτηση επιστρέφει το Instance. Αν όχι τότε γίνεται  
  evaluate η χειρότερη κατάσταση για τον minimizer (σκορ 64) και δημιουργούνται τα παιδιά του τρέχοντος instance του board.
  Για κάθε παιδί καλείται η συνάρτηση max, γίνεται evaluation και ελέγχονται οι συνθήκες για το α-β πριόνισμα.
